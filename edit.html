<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>–†–µ–¥–∞–∫—Ç–æ—Ä iframe ‚Äî Reading Trainer by Nika Shum</title>
<link id="gfLink" rel="stylesheet">
<style>
  :root { --panel:#261635d9; --border:#a85ad9; --ink:#e0d1f9; }
  *{box-sizing:border-box}
  body{
    min-height:100vh;margin:0;background:radial-gradient(ellipse at 50% 25%, #232135 60%, #141025 100%);
    color:var(--ink);font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif;
    padding:24px
  }
  h1{
    font-family: "Georgia", serif; text-align:center; font-size:2.2em; margin:6px 0 0;
    color:#c7a3fa; text-shadow:0 2px 24px #a276ff66,0 1px 2px #000
  }
  .subtitle{ text-align:center; color:#ecc2ff; margin:6px 0 22px; }
  .panel{
    max-width:980px;margin:0 auto;background:var(--panel);border:2.5px solid var(--border);
    border-radius:22px; padding:22px; box-shadow:0 8px 32px #3e146066
  }
  label{ display:block; margin:14px 0 6px; font-weight:700 }
  input[type=text], textarea, select, input[type=number], input[type=range]{
    width:100%; background:#27173a; border:1.5px solid #6c4797; color:#e6d7fa;
    border-radius:10px; padding:10px 12px; font-family:inherit; font-size:15px;
    box-shadow: inset 0 0 8px #3e146033
  }
  textarea{ min-height:110px; resize:vertical }
  .row{ display:flex; gap:16px; align-items:flex-start; flex-wrap:wrap }
  .col{ flex:1; min-width:260px }
  .color-row{ display:flex; align-items:center; gap:12px }
  .swatch{ width:34px;height:34px;border-radius:8px;border:2.5px solid #d5c5f7; cursor:pointer; box-shadow:0 1px 4px #6c4797aa }
  input[type=color]{ display:none }
  .size{ display:flex; gap:12px; align-items:center; margin-top:10px; flex-wrap:wrap }
  .size>div{ display:flex; gap:8px; align-items:center }
  .size input{ width:120px }
  .preview{
    margin-top:16px; background:#1e132a; border:2px solid #bea1fa; border-radius:18px; padding:18px;
    box-shadow:0 2px 32px #7441b088
  }
  .p-title{ text-align:center; font-weight:700; font-size:1.3em; margin:0 0 8px }
  .p-text{ font-size:1.05em; line-height:1.55 }
  .helpers{ display:flex; gap:10px; flex-wrap:wrap; margin-top:8px }
  .toggle{ display:flex; align-items:center; gap:8px; background:#2a1a3f; border:1px solid #6c4797; padding:8px 10px; border-radius:10px }
  .out{ margin-top:14px; background:#20112a; border:1.5px solid #b888fa; border-radius:10px; padding:12px; font-family:monospace; white-space:pre-wrap; min-height:70px }
  .btn{
    width:100%; margin-top:10px; padding:12px; border:none; border-radius:12px; cursor:pointer;
    background:linear-gradient(90deg,#c378f6 15%,#7c52c8 100%); color:#fff; font-weight:700; box-shadow:0 1px 18px #9f50b380
  }
  .btn:hover{ background:linear-gradient(90deg,#ecc2ff 10%,#a46fff 90%); color:#452b60 }
  .note{ opacity:.85; font-size:.9em; margin-top:6px }
</style>
</head>
<body>
  <h1>–¢—Ä–µ–Ω–∞–∂—ë—Ä –ø–æ —á—Ç–µ–Ω–∏—é ‚Äî –†–µ–¥–∞–∫—Ç–æ—Ä iframe</h1>
  <div class="subtitle">–ü—É–±–ª–∏–∫–∞—Ü–∏—è: <b>nikashum93.github.io/readingtrainer</b></div>

  <div class="panel">
    <label for="title">–ó–∞–≥–æ–ª–æ–≤–æ–∫</label>
    <input type="text" id="title" value="–í–æ–ª—à–µ–±–Ω–∞—è –æ—Å–µ–Ω—å" maxlength="150">

    <label for="text">–¢–µ–∫—Å—Ç</label>
    <textarea id="text">–û—Å–µ–Ω—å ‚Äî –≤—Ä–µ–º—è –≤–æ–ª—à–µ–±—Å—Ç–≤–∞ –∏ —á—É–¥–µ—Å. –õ–∏—Å—Ç—å—è –º–µ–Ω—è—é—Ç —Ü–≤–µ—Ç, –∞ –≤–æ–∑–¥—É—Ö —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –ø—Ä–æ–∑—Ä–∞—á–Ω—ã–º –∏ —Å–≤–µ–∂–∏–º. –í —ç—Ç–æ—Ç –ø–µ—Ä–∏–æ–¥ –ø—Ä–∏—Ä–æ–¥–∞ –±—É–¥—Ç–æ –±—ã –∑–∞–º–∏—Ä–∞–µ—Ç –≤ –æ–∂–∏–¥–∞–Ω–∏–∏ –Ω–æ–≤—ã—Ö —á—É–¥–µ—Å.</textarea>

    <!-- –®–†–ò–§–¢–´ -->
    <div class="row">
      <div class="col">
        <label for="fontCategory">–ö–∞—Ç–µ–≥–æ—Ä–∏—è —à—Ä–∏—Ñ—Ç–æ–≤</label>
        <select id="fontCategory">
          <option value="readable">–ß–∏—Ç–∞–±–µ–ª—å–Ω—ã–µ</option>
          <option value="classic">–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–µ</option>
          <option value="handwritten">–†—É–∫–æ–ø–∏—Å–Ω—ã–µ</option>
          <option value="cartoon">–ú—É–ª—å—Ç—è—à–Ω—ã–µ / –∫—Ä–µ–∞—Ç–∏–≤</option>
          <option value="display">–î–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω—ã–µ / –∞–∫—Ü–∏–¥–µ–Ω—Ç–Ω—ã–µ</option>
          <option value="cjk">CJK (‰∏≠Êñá/Êó•Êú¨Ë™û/ÌïúÍ∏Ä)</option>
        </select>
      </div>
      <div class="col">
        <label for="fontPicker">–í—ã–±–µ—Ä–∏—Ç–µ —à—Ä–∏—Ñ—Ç</label>
        <select id="fontPicker"></select>
        <div id="fontNote" class="note"></div>
      </div>
      <div class="col">
        <label for="customFont">–°–≤–æ–π —à—Ä–∏—Ñ—Ç (Google Fonts, –∏–º—è —Å–µ–º–µ–π—Å—Ç–≤–∞)</label>
        <input type="text" id="customFont" placeholder="–ù–∞–ø—Ä.: Poppins –∏–ª–∏ Rubik Bubbles">
        <button type="button" id="useCustomFont" class="btn" style="margin-top:8px">–ü—Ä–∏–º–µ–Ω–∏—Ç—å —Å–≤–æ–π —à—Ä–∏—Ñ—Ç</button>
      </div>
    </div>

    <!-- –¶–í–ï–¢–ê –ò –ü–†–û–ó–†–ê–ß–ù–û–°–¢–ò -->
    <div class="row">
      <div class="col">
        <label>–¶–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞</label>
        <div class="color-row">
          <div class="swatch" id="textColorBox" title="–í—ã–±—Ä–∞—Ç—å —Ü–≤–µ—Ç"></div>
          <input type="color" id="textColor" value="#fff8e1">
        </div>
      </div>
      <div class="col">
        <label>–¶–≤–µ—Ç –∑–∞–≥–æ–ª–æ–≤–∫–∞</label>
        <div class="color-row">
          <div class="swatch" id="titleColorBox" title="–í—ã–±—Ä–∞—Ç—å —Ü–≤–µ—Ç"></div>
          <input type="color" id="titleColor" value="#ffd700">
        </div>
      </div>
      <div class="col">
        <label>–†–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞ (px)</label>
        <input type="number" id="fontSize" min="16" max="72" value="28">
      </div>
    </div>

    <div class="row">
      <div class="col">
        <label>–¶–≤–µ—Ç –ø–æ–¥—Å–≤–µ—Ç–∫–∏ —Å–ª–æ–≤–∞</label>
        <div class="color-row">
          <div class="swatch" id="highlightColorBox" title="–í—ã–±—Ä–∞—Ç—å —Ü–≤–µ—Ç"></div>
          <input type="color" id="highlightColor" value="#ffd700">
        </div>
      </div>
      <div class="col">
        <label>–ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å –ø–æ–¥—Å–≤–µ—Ç–∫–∏ (0‚Äì1)</label>
        <input type="range" id="highlightOpacity" min="0" max="1" step="0.05" value="1">
      </div>
      <div class="col">
        <label for="highlightStyle">–¢–∏–ø –ø–æ–¥—Å–≤–µ—Ç–∫–∏</label>
        <select id="highlightStyle">
          <option value="background">–§–æ–Ω —Å–ª–æ–≤–∞</option>
          <option value="text">–¶–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞</option>
        </select>
      </div>
    </div>

    <div class="row">
      <div class="col">
        <label>–§–æ–Ω ‚Äî —Ü–≤–µ—Ç</label>
        <div class="color-row">
          <div class="swatch" id="bgColorBox" title="–í—ã–±—Ä–∞—Ç—å —Ü–≤–µ—Ç"></div>
          <input type="color" id="bgColor" value="#111111">
        </div>
      </div>
      <div class="col">
        <label>–§–æ–Ω ‚Äî –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å (0‚Äì1)</label>
        <input type="range" id="bgOpacity" min="0" max="1" step="0.05" value="1">
      </div>
      <div class="col">
        <div class="helpers">
          <label class="toggle"><input type="checkbox" id="quickTransparent"> –ü—Ä–æ–∑—Ä–∞—á–Ω—ã–π —Ñ–æ–Ω</label>
        </div>
      </div>
    </div>

    <!-- –†–ê–ú–ö–ê -->
    <div class="row">
      <div class="col">
        <div class="helpers">
          <label class="toggle"><input type="checkbox" id="noBorder"> –ë–µ–∑ —Ä–∞–º–∫–∏</label>
        </div>
      </div>
      <div class="col">
        <label>–¶–≤–µ—Ç —Ä–∞–º–∫–∏ (–µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–∞)</label>
        <div class="color-row">
          <div class="swatch" id="borderColorBox" title="–í—ã–±—Ä–∞—Ç—å —Ü–≤–µ—Ç"></div>
          <input type="color" id="borderColor" value="#ffd700">
        </div>
      </div>
      <div class="col">
        <label>–°–∫—Ä—É–≥–ª–µ–Ω–∏–µ —Ä–∞–º–∫–∏ (0‚Äì1000 px)</label>
        <input type="number" id="borderRadius" min="0" max="1000" value="18">
        <div class="helpers">
          <label class="toggle"><input type="checkbox" id="quickRound"> –ö—Ä—É–≥–ª–∞—è —Ä–∞–º–∫–∞ (1000px)</label>
        </div>
      </div>
    </div>

    <!-- –ü–†–ï–î–ü–†–û–°–ú–û–¢–† -->
    <div class="preview" id="preview">
      <div class="p-title" id="pTitle">–í–æ–ª—à–µ–±–Ω–∞—è –æ—Å–µ–Ω—å</div>
      <div class="p-text" id="pText">–û—Å–µ–Ω—å ‚Äî –≤—Ä–µ–º—è –≤–æ–ª—à–µ–±—Å—Ç–≤–∞ –∏ —á—É–¥–µ—Å‚Ä¶</div>
    </div>

    <!-- –†–ê–ó–ú–ï–†–´ –∏ IFRAME -->
    <div class="size">
      <div><label for="fw">–®–∏—Ä–∏–Ω–∞ iframe</label><input type="number" id="fw" value="900" min="300" max="3000"></div>
      <div><label for="fh">–í—ã—Å–æ—Ç–∞ iframe</label><input type="number" id="fh" value="520" min="200" max="3000"></div>
    </div>

    <div class="out" id="out"></div>
    <button class="btn" id="copyBtn">üìã –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å iframe</button>
  </div>

<script>
// ====== –ö–û–ù–§–ò–ì ======
const BASE_URL = 'https://nikashum93.github.io/readingtrainer/main.html';

// –ö–∞—Ç–∞–ª–æ–≥ —à—Ä–∏—Ñ—Ç–æ–≤
const FONT_LIB = {
  readable: [
    {name:"Inter", gf:"Inter:wght@400;700", scripts:["lat","ru"]},
    {name:"Roboto", gf:"Roboto:wght@400;700", scripts:["lat","ru"]},
    {name:"Open Sans", gf:"Open+Sans:wght@400;700", scripts:["lat","ru"]},
    {name:"PT Sans", gf:"PT+Sans:wght@400;700", scripts:["lat","ru"]},
    {name:"Noto Sans", gf:"Noto+Sans:wght@400;700", scripts:["lat","ru","zh","ja","kr"]},
    {name:"Montserrat", gf:"Montserrat:wght@400;700", scripts:["lat","ru"]}
  ],
  classic: [
    {name:"Lora", gf:"Lora:wght@400;700", scripts:["lat","ru"]},
    {name:"Merriweather", gf:"Merriweather:wght@400;700", scripts:["lat","ru"]},
    {name:"EB Garamond", gf:"EB+Garamond:wght@400;700", scripts:["lat","ru"]},
    {name:"Crimson Text", gf:"Crimson+Text:wght@400;700", scripts:["lat","ru"]}
  ],
  handwritten: [
    {name:"Caveat", gf:"Caveat:wght@400;700", scripts:["lat","ru"]},
    {name:"Neucha", gf:"Neucha", scripts:["lat","ru"]},
    {name:"Marck Script", gf:"Marck+Script", scripts:["lat","ru"]},
    {name:"Bad Script", gf:"Bad+Script", scripts:["lat","ru"]},
    {name:"Patrick Hand", gf:"Patrick+Hand", scripts:["lat"]},
    {name:"Permanent Marker", gf:"Permanent+Marker", scripts:["lat"]}
  ],
  cartoon: [
    {name:"Fredoka", gf:"Fredoka:wght@400;700", scripts:["lat","ru"]},
    {name:"Rubik Bubbles", gf:"Rubik+Bubbles", scripts:["lat"]},
    {name:"Bangers", gf:"Bangers", scripts:["lat"]},
    {name:"Luckiest Guy", gf:"Luckiest+Guy", scripts:["lat"]},
    {name:"Chewy", gf:"Chewy", scripts:["lat"]},
    {name:"Comfortaa", gf:"Comfortaa:wght@400;700", scripts:["lat","ru"]},
    {name:"Poiret One", gf:"Poiret+One", scripts:["lat","ru"]},
    {name:"Lobster", gf:"Lobster", scripts:["lat","ru"]},
    {name:"Amatic SC", gf:"Amatic+SC:wght@400;700", scripts:["lat"]},
    {name:"Press Start 2P", gf:"Press+Start+2P", scripts:["lat"]}
  ],
  display: [
    {name:"Raleway", gf:"Raleway:wght@400;700", scripts:["lat","ru"]},
    {name:"Alegreya", gf:"Alegreya:wght@400;700", scripts:["lat","ru"]},
    {name:"Playfair Display", gf:"Playfair+Display:wght@400;700", scripts:["lat","ru"]},
    {name:"Ruslan Display", gf:"Ruslan+Display", scripts:["lat","ru"]}
  ],
  cjk: [
    {name:"Noto Sans SC", gf:"Noto+Sans+SC:wght@400;700", scripts:["zh"]},
    {name:"Noto Serif SC", gf:"Noto+Serif+SC:wght@400;700", scripts:["zh"]},
    {name:"ZCOOL XiaoWei", gf:"ZCOOL+XiaoWei", scripts:["zh"]},
    {name:"ZCOOL KuaiLe", gf:"ZCOOL+KuaiLe", scripts:["zh"]},
    {name:"Noto Sans JP", gf:"Noto+Sans+JP:wght@400;700", scripts:["ja"]},
    {name:"Noto Serif JP", gf:"Noto+Serif+JP:wght@400;700", scripts:["ja"]},
    {name:"M PLUS Rounded 1c", gf:"M+PLUS+Rounded+1c:wght@400;700", scripts:["ja"]},
    {name:"Kosugi Maru", gf:"Kosugi+Maru", scripts:["ja"]},
    {name:"Noto Sans KR", gf:"Noto+Sans+KR:wght@400;700", scripts:["kr"]},
    {name:"Do Hyeon", gf:"Do+Hyeon", scripts:["kr"]},
    {name:"Gugi", gf:"Gugi", scripts:["kr"]}
  ]
};

// ====== DOM ======
const titleEl = document.getElementById('title');
const textEl = document.getElementById('text');

const fontCategory = document.getElementById('fontCategory');
const fontPicker   = document.getElementById('fontPicker');
const customFont   = document.getElementById('customFont');
const useCustomBtn = document.getElementById('useCustomFont');
const gfLink       = document.getElementById('gfLink');
const fontNote     = document.getElementById('fontNote');

const textColor = document.getElementById('textColor');
const titleColor = document.getElementById('titleColor');
const fontSize = document.getElementById('fontSize');

const highlightColor = document.getElementById('highlightColor');
const highlightOpacity = document.getElementById('highlightOpacity');
const highlightStyle = document.getElementById('highlightStyle');

const bgColor = document.getElementById('bgColor');
const bgOpacity = document.getElementById('bgOpacity');
const quickTransparent = document.getElementById('quickTransparent');

const noBorder = document.getElementById('noBorder');
const borderColor = document.getElementById('borderColor');
const borderRadius = document.getElementById('borderRadius');
const quickRound = document.getElementById('quickRound');

const pTitle = document.getElementById('pTitle');
const pText = document.getElementById('pText');
const preview = document.getElementById('preview');

const fw = document.getElementById('fw');
const fh = document.getElementById('fh');
const out = document.getElementById('out');
const copyBtn = document.getElementById('copyBtn');

// ====== –¶–≤–µ—Ç–æ–≤—ã–µ –∫–≤–∞–¥—Ä–∞—Ç–∏–∫–∏ ======
function initPicker(boxId, inputId) {
  const box = document.getElementById(boxId);
  const input = document.getElementById(inputId);
  box.style.background = input.value || '#0000';
  box.addEventListener('click', ()=> input.click());
  input.addEventListener('input', ()=>{ box.style.background = input.value; updatePreview(); renderIframe(); });
}
['textColor','titleColor','highlightColor','bgColor','borderColor'].forEach(id=>initPicker(id+'Box', id));

// ====== –®—Ä–∏—Ñ—Ç—ã ======
function detectScript(s){
  const t = (s||"").trim(); const ch = t.charAt(0);
  if (/[–∞-—è—ë]/i.test(ch)) return "ru";
  if (/[\u4E00-\u9FFF]/.test(ch)) return "zh";
  if (/[„ÅÅ-„Çü„Ç†-„Éø]/.test(ch)) return "ja";
  if (/[„Ñ±-„Öé„Öè-„Ö£Í∞Ä-Ìû£]/.test(ch)) return "kr";
  return "lat";
}
function loadGoogleFont(gfQuery){
  gfLink.href = `https://fonts.googleapis.com/css2?family=${gfQuery}&display=swap`;
}
function applyFontToPreview(cssFamily){
  preview.style.fontFamily = cssFamily;
  // —Å–∫—Ä—ã—Ç–æ–µ –ø–æ–ª–µ fontFamily –Ω–∞–º –Ω–µ –Ω—É–∂–Ω–æ: –ø—Ä–æ—Å—Ç–æ –≤—Å—Ç–∞–≤–∏–º –≤ –∏—Ç–æ–≥–æ–≤—ã–π URL –Ω–∞–ø—Ä—è–º—É—é
  preview.dataset.fontFamily = cssFamily;
}
function fillFontPicker(){
  const cat = fontCategory.value;
  const list = FONT_LIB[cat] || [];
  fontPicker.innerHTML = "";
  list.forEach(f=>{
    const opt = document.createElement('option');
    opt.value = f.name;
    opt.textContent = f.name;
    opt.dataset.gf = f.gf;
    opt.dataset.scripts = f.scripts.join(',');
    fontPicker.appendChild(opt);
  });
  if (list[0]) {
    loadGoogleFont(list[0].gf);
    applyFontToPreview(`'${list[0].name}', system-ui, Arial, sans-serif`);
  }
  updateFontWarning();
}
function updateFontWarning(){
  const script = detectScript(textEl.value);
  const opt = fontPicker.selectedOptions[0];
  if (!opt){ fontNote.textContent=""; return; }
  const sup = (opt.dataset.scripts||"").split(',');
  fontNote.textContent = sup.includes(script)
    ? "‚úî –®—Ä–∏—Ñ—Ç –ø–æ–¥—Ö–æ–¥–∏—Ç –ø–æ–¥ —è–∑—ã–∫ —Ç–µ–∫—Å—Ç–∞."
    : "‚ö† –≠—Ç–æ—Ç —à—Ä–∏—Ñ—Ç –º–æ–∂–µ—Ç –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å —Å–∏–º–≤–æ–ª—ã —Ç–µ–∫—Å—Ç–∞ (–±—É–¥–µ—Ç –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∞).";
}
fontCategory.addEventListener('change', fillFontPicker);
fontPicker.addEventListener('change', ()=>{
  const opt = fontPicker.selectedOptions[0];
  if (!opt) return;
  loadGoogleFont(opt.dataset.gf);
  applyFontToPreview(`'${opt.value}', system-ui, Arial, sans-serif`);
  updateFontWarning(); renderIframe();
});
useCustomBtn.addEventListener('click', ()=>{
  const name = customFont.value.trim();
  if (!name) return;
  const gf = `${encodeURIComponent(name).replace(/%20/g,'+')}:wght@400;700`;
  loadGoogleFont(gf);
  applyFontToPreview(`'${name}', system-ui, Arial, sans-serif`);
  fontNote.textContent = "‚Ñπ –ï—Å–ª–∏ —à—Ä–∏—Ñ—Ç –Ω–µ –∑–∞–≥—Ä—É–∑–∏–ª—Å—è, –ø—Ä–æ–≤–µ—Ä—å —Ç–æ—á–Ω–æ–µ –∏–º—è –Ω–∞ Google Fonts.";
  renderIframe();
});
textEl.addEventListener('input', updateFontWarning);
fillFontPicker();

// ====== –ë—ã—Å—Ç—Ä—ã–µ —Ç—É–º–±–ª–µ—Ä—ã ======
quickTransparent.addEventListener('change', ()=>{
  bgOpacity.value = quickTransparent.checked ? 0 : 1;
  updatePreview(); renderIframe();
});
quickRound.addEventListener('change', ()=>{
  borderRadius.value = quickRound.checked ? 1000 : 18;
  updatePreview(); renderIframe();
});

// ====== –ü—Ä–µ–≤—å—é ======
function updatePreview(){
  pTitle.textContent = titleEl.value;
  pTitle.style.color = titleColor.value;
  pText.textContent = textEl.value;

  preview.style.background = bgColor.value; // –ø—Ä–∏–±–ª–∏–∑–∏—Ç–µ–ª—å–Ω–æ, –±–µ–∑ —É—á—ë—Ç–∞ opacity
  preview.style.color = textColor.value;
  preview.style.fontSize = fontSize.value + 'px';

  if (noBorder.checked){
    preview.style.border = 'none';
    preview.style.boxShadow = 'none';
  } else {
    preview.style.border = `2px solid ${borderColor.value}`;
    preview.style.boxShadow = '';
  }
  preview.style.borderRadius = (parseInt(borderRadius.value)||0) + 'px';
}

// ====== URL params / iframe ======
function buildParams(){
  const params = {
    title: titleEl.value,
    text: textEl.value,
    fontFamily: preview.dataset.fontFamily || "'Inter', system-ui, Arial, sans-serif",
    fontSize: fontSize.value,
    textColor: textColor.value,
    titleColor: titleColor.value,

    highlightColor: highlightColor.value,
    highlightOpacity: highlightOpacity.value,
    highlightStyle: highlightStyle.value,

    bgColor: bgColor.value,
    bgOpacity: bgOpacity.value,

    border: noBorder.checked ? 'none' : 'solid',
    borderColor: noBorder.checked ? '' : borderColor.value,
    borderRadius: borderRadius.value
  };
  return Object.entries(params)
    .filter(([k,v])=> v!=='' && v!==null && v!==undefined)
    .map(([k,v])=> `${encodeURIComponent(k)}=${encodeURIComponent(v)}`)
    .join('&');
}
function renderIframe(){
  const qs = buildParams();
  const code = `<iframe src="${BASE_URL}?${qs}" width="${fw.value}" height="${fh.value}" style="border:none;border-radius:16px;overflow:hidden;"></iframe>`;
  out.textContent = code;
}

// ====== Bindings ======
document.querySelectorAll('input, textarea, select').forEach(el=>{
  el.addEventListener('input', ()=>{ updatePreview(); renderIframe(); });
});
noBorder.addEventListener('change', ()=>{ updatePreview(); renderIframe(); });

// ====== INIT ======
updatePreview();
renderIframe();
</script>
</body>
</html>
