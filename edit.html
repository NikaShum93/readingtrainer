<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–¢—Ä–µ–Ω–∞–∂—ë—Ä –ø–æ —á—Ç–µ–Ω–∏—é by Nika Shum ‚Äî –†–µ–¥–∞–∫—Ç–æ—Ä</title>
  <link href="https://fonts.googleapis.com/css2?family=UnifrakturCook:wght@700&family=Comfortaa:wght@400;700&family=PT+Sans:wght@400;700&family=Montserrat:wght@400;700&family=Roboto:wght@400;700&family=Noto+Sans+SC:wght@400;700&family=Noto+Sans+JP:wght@400;700&display=swap" rel="stylesheet">
  <style>
    :root { --panel:#261635d9; --border:#a85ad9; --ink:#e0d1f9; }
    *{box-sizing:border-box}
    body{
      min-height:100vh;margin:0;background:radial-gradient(ellipse at 50% 25%, #232135 60%, #141025 100%);
      color:var(--ink);font-family:'Comfortaa',cursive,sans-serif;padding:24px
    }
    h1{
      font-family:'UnifrakturCook',cursive; text-align:center; font-size:2.4em; margin:6px 0 0;
      color:#c7a3fa; text-shadow:0 2px 24px #a276ff99,0 1px 2px #000; letter-spacing:2px
    }
    .subtitle{ text-align:center; color:#ecc2ff; margin:6px 0 22px; }
    .panel{
      max-width:780px;margin:0 auto;background:var(--panel);border:2.5px solid var(--border);
      border-radius:22px; padding:22px; box-shadow:0 8px 32px #3e146066
    }
    label{ display:block; margin:14px 0 6px; font-weight:700; letter-spacing:.3px }
    input[type=text], textarea, select, input[type=number]{
      width:100%; background:#27173a; border:1.5px solid #6c4797; color:#e6d7fa;
      border-radius:10px; padding:10px 12px; font-family:inherit; font-size:16px;
      box-shadow: inset 0 0 8px #3e146033
    }
    textarea{ min-height:110px; resize:vertical }
    .row{ display:flex; gap:16px; align-items:center; flex-wrap:wrap }
    .color-row{ display:flex; align-items:center; gap:12px }
    .swatch{
      width:34px;height:34px;border-radius:8px;border:2.5px solid #d5c5f7; cursor:pointer;
      box-shadow:0 1px 4px #6c4797aa
    }
    input[type=color]{ display:none }
    .preview{
      margin-top:18px; background:#1e132a; border:2px solid #bea1fa; border-radius:16px;
      padding:18px 18px 14px; box-shadow:0 2px 32px #7441b088
    }
    .p-title{ text-align:center; font-weight:700; font-size:1.6em; margin:0 0 10px }
    .p-text{ font-size:1.1em; line-height:1.55 }
    .out{
      margin-top:14px; background:#20112a; border:1.5px solid #b888fa; border-radius:10px;
      padding:12px; font-family:monospace; white-space:pre-wrap; min-height:70px
    }
    .btn{
      width:100%; margin-top:10px; padding:12px; border:none; border-radius:12px; cursor:pointer;
      background:linear-gradient(90deg,#c378f6 15%,#7c52c8 100%); color:#fff; font-weight:700;
      box-shadow:0 1px 18px #9f50b380
    }
    .btn:hover{ background:linear-gradient(90deg,#ecc2ff 10%,#a46fff 90%); color:#452b60 }
    .small{ opacity:.8; font-size:.9em; margin-top:4px }
    .size{ display:flex; gap:12px; align-items:center }
    .size>div{ display:flex; gap:8px; align-items:center }
    .size input{ width:110px }
  </style>
</head>
<body>
  <h1>–¢—Ä–µ–Ω–∞–∂—ë—Ä –ø–æ —á—Ç–µ–Ω–∏—é by Nika Shum</h1>
  <div class="subtitle">–í–µ–¥—å–º–æ–≤—Å–∫–∏–π —Ä–µ–¥–∞–∫—Ç–æ—Ä ‚Äî –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Ç–æ–ª—å–∫–æ iframe</div>

  <div class="panel">
    <label for="title">–ó–∞–≥–æ–ª–æ–≤–æ–∫</label>
    <input type="text" id="title" value="–í–æ–ª—à–µ–±–Ω–∞—è –æ—Å–µ–Ω—å" maxlength="120">

    <label for="text">–¢–µ–∫—Å—Ç –¥–ª—è —á—Ç–µ–Ω–∏—è</label>
    <textarea id="text">–û—Å–µ–Ω—å ‚Äî –≤—Ä–µ–º—è –≤–æ–ª—à–µ–±—Å—Ç–≤–∞ –∏ —á—É–¥–µ—Å. –õ–∏—Å—Ç—å—è –º–µ–Ω—è—é—Ç —Ü–≤–µ—Ç, –∞ –≤–æ–∑–¥—É—Ö —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –ø—Ä–æ–∑—Ä–∞—á–Ω—ã–º –∏ —Å–≤–µ–∂–∏–º. –í —ç—Ç–æ—Ç –ø–µ—Ä–∏–æ–¥ –ø—Ä–∏—Ä–æ–¥–∞ –±—É–¥—Ç–æ –±—ã –∑–∞–º–∏—Ä–∞–µ—Ç –≤ –æ–∂–∏–¥–∞–Ω–∏–∏ –Ω–æ–≤—ã—Ö —á—É–¥–µ—Å.</textarea>

    <div class="row">
      <div style="flex:1">
        <label>–¶–≤–µ—Ç –ø–æ–¥—Å–≤–µ—Ç–∫–∏ —Å–ª–æ–≤–∞</label>
        <div class="color-row">
          <div class="swatch" id="highlightColorBox" title="–í—ã–±—Ä–∞—Ç—å —Ü–≤–µ—Ç"></div>
          <input type="color" id="highlightColor" value="#ffd700">
        </div>
      </div>
      <div style="flex:1">
        <label>–¶–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞</label>
        <div class="color-row">
          <div class="swatch" id="textColorBox" title="–í—ã–±—Ä–∞—Ç—å —Ü–≤–µ—Ç"></div>
          <input type="color" id="textColor" value="#fff8e1">
        </div>
      </div>
    </div>

    <div class="row">
      <div style="flex:1">
        <label>–¶–≤–µ—Ç –∑–∞–≥–æ–ª–æ–≤–∫–∞</label>
        <div class="color-row">
          <div class="swatch" id="titleColorBox" title="–í—ã–±—Ä–∞—Ç—å —Ü–≤–µ—Ç"></div>
          <input type="color" id="titleColor" value="#ffd700">
        </div>
      </div>
      <div style="flex:1">
        <label>–§–æ–Ω</label>
        <div class="color-row">
          <div class="swatch" id="bgColorBox" title="–í—ã–±—Ä–∞—Ç—å —Ü–≤–µ—Ç"></div>
          <input type="color" id="bgColor" value="#1a1a2e">
        </div>
        <div class="small">–ù—É–∂–µ–Ω –ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π ‚Äî –ø–æ—Å—Ç–∞–≤—å –≤ —Å—Ç–∏–ª—è—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –≤ main –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π rgba —Å –∞–ª—å—Ñ–æ–π 0.</div>
      </div>
    </div>

    <div class="row">
      <div style="flex:1">
        <label for="fontFamily">–®—Ä–∏—Ñ—Ç</label>
        <select id="fontFamily">
          <option value="'Comfortaa', cursive">Comfortaa (—É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π)</option>
          <option value="'UnifrakturCook', cursive">UnifrakturCook (–º–∞–≥–∏—á–µ—Å–∫–∏–π)</option>
          <option value="'PT Sans', sans-serif">PT Sans (—Ä—É—Å—Å–∫–∏–π/–ª–∞—Ç–∏–Ω.)</option>
          <option value="'Roboto', sans-serif">Roboto</option>
          <option value="'Montserrat', sans-serif">Montserrat</option>
          <option value="'Noto Sans SC', sans-serif">Noto Sans SC (‰∏≠Êñá)</option>
          <option value="'Noto Sans JP', sans-serif">Noto Sans JP (Êó•Êú¨Ë™û)</option>
          <option value="'Georgia', serif">Georgia (serif)</option>
          <option value="'Arial', sans-serif">Arial</option>
        </select>
      </div>
      <div style="width:180px">
        <label for="fontSize">–†–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞ (px)</label>
        <input type="number" id="fontSize" min="16" max="72" value="28">
      </div>
      <div style="flex:1">
        <label for="highlightStyle">–¢–∏–ø –ø–æ–¥—Å–≤–µ—Ç–∫–∏</label>
        <select id="highlightStyle">
          <option value="background">–§–æ–Ω —Å–ª–æ–≤–∞</option>
          <option value="text">–¶–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞</option>
        </select>
      </div>
    </div>

    <div class="preview" id="preview">
      <div class="p-title" id="pTitle">–í–æ–ª—à–µ–±–Ω–∞—è –æ—Å–µ–Ω—å</div>
      <div class="p-text" id="pText">–û—Å–µ–Ω—å ‚Äî –≤—Ä–µ–º—è –≤–æ–ª—à–µ–±—Å—Ç–≤–∞ –∏ —á—É–¥–µ—Å. –õ–∏—Å—Ç—å—è –º–µ–Ω—è—é—Ç —Ü–≤–µ—Ç, –∞ –≤–æ–∑–¥—É—Ö —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –ø—Ä–æ–∑—Ä–∞—á–Ω—ã–º –∏ —Å–≤–µ–∂–∏–º. –í —ç—Ç–æ—Ç –ø–µ—Ä–∏–æ–¥ –ø—Ä–∏—Ä–æ–¥–∞ –±—É–¥—Ç–æ –±—ã –∑–∞–º–∏—Ä–∞–µ—Ç –≤ –æ–∂–∏–¥–∞–Ω–∏–∏ –Ω–æ–≤—ã—Ö —á—É–¥–µ—Å.</div>
    </div>

    <div class="size" style="margin-top:10px;">
      <div><label for="fw">–®–∏—Ä–∏–Ω–∞ iframe</label><input type="number" id="fw" value="900" min="300" max="2000"></div>
      <div><label for="fh">–í—ã—Å–æ—Ç–∞ iframe</label><input type="number" id="fh" value="520" min="200" max="2000"></div>
    </div>

    <div class="out" id="out"></div>
    <button class="btn" id="copyBtn">üìã –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥</button>
  </div>

  <script>
    // GitHub Pages –±–∞–∑–∞ (—Ç–≤–æ—è): NikaShum93/readingtrainer
    const BASE_URL = 'https://nikashum93.github.io/readingtrainer/main.html';

    // –ü–∞–ª–∏—Ç—Ä—ã-–∫–≤–∞–¥—Ä–∞—Ç–∏–∫–∏
    function initPicker(boxId, inputId) {
      const box = document.getElementById(boxId);
      const input = document.getElementById(inputId);
      box.style.background = input.value;
      box.addEventListener('click', ()=> input.click());
      input.addEventListener('input', ()=>{
        box.style.background = input.value;
        updatePreview();
        renderIframe();
      });
    }
    ['highlightColor','textColor','titleColor','bgColor'].forEach(id=>{
      initPicker(id+'Box', id);
    });

    const titleEl = document.getElementById('title');
    const textEl = document.getElementById('text');
    const highlightColor = document.getElementById('highlightColor');
    const textColor = document.getElementById('textColor');
    const titleColor = document.getElementById('titleColor');
    const bgColor = document.getElementById('bgColor');
    const fontFamily = document.getElementById('fontFamily');
    const fontSize = document.getElementById('fontSize');
    const highlightStyle = document.getElementById('highlightStyle');
    const pTitle = document.getElementById('pTitle');
    const pText = document.getElementById('pText');
    const fw = document.getElementById('fw');
    const fh = document.getElementById('fh');
    const out = document.getElementById('out');
    const copyBtn = document.getElementById('copyBtn');

    function updatePreview(){
      const t = titleEl.value;
      const tx = textEl.value;
      const tc = textColor.value;
      const tcol = titleColor.value;
      const bg = bgColor.value;
      const ff = fontFamily.value;
      const fs = fontSize.value;

      const prev = document.getElementById('preview');
      prev.style.fontFamily = ff;
      prev.style.color = tc;
      prev.style.background = bg;
      prev.style.fontSize = fs + 'px';

      pTitle.textContent = t;
      pTitle.style.color = tcol;

      pText.textContent = tx;
    }

    function buildParams(){
      const params = {
        title: titleEl.value,
        text: textEl.value,
        highlightColor: highlightColor.value,
        textColor: textColor.value,
        titleColor: titleColor.value,
        bgColor: bgColor.value,
        fontFamily: fontFamily.value,
        fontSize: fontSize.value,
        highlightStyle: highlightStyle.value
      };
      return Object.entries(params)
        .map(([k,v])=> `${encodeURIComponent(k)}=${encodeURIComponent(v)}`)
        .join('&');
    }

    function renderIframe(){
      const qs = buildParams();
      const code = `<iframe src="${BASE_URL}?${qs}" width="${fw.value}" height="${fh.value}" style="border:none;border-radius:16px;overflow:hidden;"></iframe>`;
      out.textContent = code;
    }

    // –ê–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è iframe –ø—Ä–∏ –ª—é–±—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö
    document.querySelectorAll('input, textarea, select').forEach(el=>{
      el.addEventListener('input', ()=>{
        updatePreview();
        renderIframe();
      });
    });

    copyBtn.addEventListener('click', async ()=>{
      try {
        await navigator.clipboard.writeText(out.textContent.trim());
        copyBtn.textContent = '‚úÖ –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ';
        setTimeout(()=> copyBtn.textContent = 'üìã –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥', 1200);
      } catch(e){
        copyBtn.textContent = '‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å';
        setTimeout(()=> copyBtn.textContent = 'üìã –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥', 1500);
      }
    });

    // init
    updatePreview();
    renderIframe();
  </script>
</body>
</html>
